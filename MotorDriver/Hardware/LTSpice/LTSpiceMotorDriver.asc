Version 4
SHEET 1 2396 1896
WIRE 128 -1584 -384 -1584
WIRE 688 -1584 128 -1584
WIRE 128 -1392 128 -1584
WIRE 688 -1392 688 -1584
WIRE 0 -1312 -128 -1312
WIRE 560 -1312 480 -1312
WIRE -608 -1296 -688 -1296
WIRE -512 -1296 -608 -1296
WIRE -384 -1296 -384 -1584
WIRE -384 -1296 -512 -1296
WIRE 1504 -1264 1296 -1264
WIRE 1504 -1200 1504 -1264
WIRE -608 -1168 -608 -1296
WIRE -512 -1168 -512 -1296
WIRE 128 -1120 128 -1296
WIRE 128 -1120 -128 -1120
WIRE 688 -1120 688 -1296
WIRE 688 -1120 480 -1120
WIRE 128 -1088 128 -1120
WIRE 1008 -1088 128 -1088
WIRE 1296 -1088 1296 -1264
WIRE 1296 -1088 1008 -1088
WIRE 1504 -1040 1504 -1120
WIRE 688 -1024 688 -1120
WIRE 1008 -1024 688 -1024
WIRE 1296 -1024 1008 -1024
WIRE 128 -992 128 -1088
WIRE 688 -992 688 -1024
WIRE -608 -976 -608 -1104
WIRE -608 -976 -688 -976
WIRE -512 -976 -512 -1104
WIRE -512 -976 -608 -976
WIRE -384 -976 -512 -976
WIRE -2160 -944 -2208 -944
WIRE -2048 -944 -2080 -944
WIRE -1872 -944 -2048 -944
WIRE -1744 -944 -1872 -944
WIRE -1648 -944 -1744 -944
WIRE -1616 -944 -1648 -944
WIRE -1296 -944 -1328 -944
WIRE -1216 -944 -1296 -944
WIRE -1088 -944 -1216 -944
WIRE -976 -944 -1088 -944
WIRE 0 -912 -128 -912
WIRE 560 -912 480 -912
WIRE 1296 -880 1296 -1024
WIRE 1504 -880 1504 -960
WIRE 1504 -880 1296 -880
WIRE -1648 -848 -1648 -944
WIRE -1616 -848 -1648 -848
WIRE -1296 -848 -1296 -944
WIRE -1296 -848 -1328 -848
WIRE -2048 -832 -2048 -944
WIRE -1872 -832 -1872 -944
WIRE -1744 -832 -1744 -944
WIRE -1216 -832 -1216 -944
WIRE -1088 -832 -1088 -944
WIRE 128 -784 128 -896
WIRE 128 -784 -128 -784
WIRE 688 -784 688 -896
WIRE 688 -784 480 -784
WIRE -384 -704 -384 -976
WIRE 128 -704 128 -784
WIRE 128 -704 -384 -704
WIRE 688 -704 688 -784
WIRE 688 -704 128 -704
WIRE -2048 -688 -2048 -768
WIRE -1872 -688 -1872 -768
WIRE -1872 -688 -2048 -688
WIRE -1744 -688 -1744 -768
WIRE -1744 -688 -1872 -688
WIRE -1472 -688 -1472 -784
WIRE -1472 -688 -1744 -688
WIRE -1216 -688 -1216 -768
WIRE -1216 -688 -1472 -688
WIRE -1088 -688 -1088 -768
WIRE -1088 -688 -1216 -688
WIRE -1472 -640 -1472 -688
WIRE -2560 -608 -2560 -880
WIRE -1872 -368 -2208 -368
WIRE -1744 -368 -1872 -368
WIRE -1088 -368 -1216 -368
WIRE -976 -368 -1088 -368
WIRE -2560 -352 -2560 -528
WIRE 960 -320 960 -368
WIRE 416 -272 416 -320
WIRE 640 -272 640 -320
WIRE -1872 -256 -1872 -368
WIRE -1744 -256 -1744 -368
WIRE -1216 -256 -1216 -368
WIRE -1088 -256 -1088 -368
WIRE 1664 -240 1600 -240
WIRE 960 -208 960 -256
WIRE 1008 -208 960 -208
WIRE 960 -176 960 -208
WIRE -2560 -160 -2560 -272
WIRE 416 -160 416 -192
WIRE 480 -160 416 -160
WIRE 640 -160 640 -192
WIRE 704 -160 640 -160
WIRE 416 -128 416 -160
WIRE 640 -128 640 -160
WIRE -1872 -112 -1872 -192
WIRE -1744 -112 -1744 -192
WIRE -1744 -112 -1872 -112
WIRE -1472 -112 -1744 -112
WIRE -1216 -112 -1216 -192
WIRE -1216 -112 -1472 -112
WIRE -1088 -112 -1088 -192
WIRE -1088 -112 -1216 -112
WIRE 1664 -112 1600 -112
WIRE -1472 -80 -1472 -112
WIRE 960 -64 960 -112
WIRE 416 -16 416 -64
WIRE 640 -16 640 -64
WIRE 944 432 944 384
WIRE 400 480 400 432
WIRE 624 480 624 432
WIRE 1664 512 1584 512
WIRE 944 544 944 496
WIRE 992 544 944 544
WIRE 944 576 944 544
WIRE 400 592 400 560
WIRE 464 592 400 592
WIRE 624 592 624 560
WIRE 688 592 624 592
WIRE 400 624 400 592
WIRE 624 624 624 592
WIRE 1664 640 1584 640
WIRE 944 688 944 640
WIRE 400 736 400 688
WIRE 624 736 624 688
FLAG 1008 -1088 Vp
FLAG 1008 -1024 Vn
FLAG -656 368 D1H
IOPIN -656 368 Out
FLAG -448 368 D1L
IOPIN -448 368 Out
FLAG -64 368 D2H
IOPIN -64 368 Out
FLAG 112 368 D2L
IOPIN 112 368 Out
FLAG -656 448 S1H
IOPIN -656 448 In
FLAG -448 448 S1L
IOPIN -448 448 In
FLAG -64 448 S2H
IOPIN -64 448 In
FLAG 112 448 S2L
IOPIN 112 448 In
FLAG -128 -1120 S1H
IOPIN -128 -1120 In
FLAG 480 -1120 S2H
IOPIN 480 -1120 In
FLAG -128 -1312 D1H
IOPIN -128 -1312 Out
FLAG -128 -912 D1L
IOPIN -128 -912 Out
FLAG 480 -1312 D2H
IOPIN 480 -1312 Out
FLAG 480 -912 D2L
IOPIN 480 -912 Out
FLAG 480 -784 S2L
IOPIN 480 -784 In
FLAG -128 -784 S1L
IOPIN -128 -784 In
FLAG -2560 -880 Vin
IOPIN -2560 -880 Out
FLAG -2560 -160 0
FLAG -1472 -640 0
FLAG -976 -944 3V3
IOPIN -976 -944 Out
FLAG -2208 -944 Vin
IOPIN -2208 -944 In
FLAG -688 -976 0
FLAG -688 -1296 Vin
IOPIN -688 -1296 In
FLAG -1472 -80 0
FLAG -976 -368 12V
IOPIN -976 -368 Out
FLAG -2208 -368 3V3
IOPIN -2208 -368 In
FLAG -2160 -160 12V
IOPIN -2160 -160 Out
FLAG -2160 -80 0
FLAG 960 -64 S1H
IOPIN 960 -64 In
FLAG 1008 -208 VB1
IOPIN 1008 -208 Out
FLAG 960 -368 12V
IOPIN 960 -368 Out
FLAG -640 -240 PWM_H1
IOPIN -640 -240 In
FLAG -640 -160 0
FLAG 416 -16 0
FLAG 416 -320 PWM_H1
IOPIN 416 -320 In
FLAG 640 -16 0
FLAG 640 -320 PWM_L1
IOPIN 640 -320 In
FLAG -448 -240 PWM_L1
IOPIN -448 -240 In
FLAG -448 -160 0
FLAG 480 -160 HIN1
IOPIN 480 -160 In
FLAG 704 -160 LIN1
IOPIN 704 -160 In
FLAG 1344 -240 VB1
IOPIN 1344 -240 In
FLAG 1600 -304 S1H
IOPIN 1600 -304 In
FLAG 1600 -176 12V
IOPIN 1600 -176 In
FLAG 1664 -240 D1H
IOPIN 1664 -240 Out
FLAG 1664 -112 D1L
IOPIN 1664 -112 Out
FLAG 1344 -112 S1L
IOPIN 1344 -112 In
FLAG 1344 -176 LIN1
IOPIN 1344 -176 In
FLAG 1344 -304 HIN1
IOPIN 1344 -304 In
FLAG 944 688 S2H
IOPIN 944 688 In
FLAG 992 544 VB2
IOPIN 992 544 Out
FLAG 944 384 12V
IOPIN 944 384 Out
FLAG -144 -240 PWM_H2
IOPIN -144 -240 In
FLAG -144 -160 0
FLAG 400 736 0
FLAG 400 432 PWM_H2
IOPIN 400 432 In
FLAG 624 736 0
FLAG 624 432 PWM_L2
IOPIN 624 432 In
FLAG 80 -240 PWM_L2
IOPIN 80 -240 In
FLAG 80 -160 0
FLAG 464 592 HIN2
IOPIN 464 592 In
FLAG 688 592 LIN2
IOPIN 688 592 In
FLAG 1328 512 VB2
IOPIN 1328 512 In
FLAG 1584 448 S2H
IOPIN 1584 448 In
FLAG 1584 576 12V
IOPIN 1584 576 In
FLAG 1664 512 D2H
IOPIN 1664 512 Out
FLAG 1664 640 D2L
IOPIN 1664 640 Out
FLAG 1328 640 S2L
IOPIN 1328 640 In
FLAG 1328 576 LIN2
IOPIN 1328 576 In
FLAG 1328 448 HIN2
IOPIN 1328 448 In
SYMBOL nmos 640 -992 R0
SYMATTR InstName M5
SYMATTR Value BSC042NE7NS3
SYMBOL res 96 -1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 3.6
SYMBOL res 96 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 3.6
SYMBOL res 656 -1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 3.6
SYMBOL res 656 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 3.6
SYMBOL voltage -2560 -368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VIN
SYMATTR Value {Vin}
SYMBOL res 1488 -1216 R0
SYMATTR InstName Rmotor
SYMATTR Value 5
SYMBOL nmos 80 -1392 R0
SYMATTR InstName M6
SYMATTR Value BSC042NE7NS3
SYMBOL nmos 80 -992 R0
SYMATTR InstName M7
SYMATTR Value BSC042NE7NS3
SYMBOL nmos 640 -1392 R0
SYMATTR InstName M8
SYMATTR Value BSC042NE7NS3
SYMBOL voltage -656 352 R0
WINDOW 3 -64 -177 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 .5 0 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V1
SYMBOL voltage -448 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -50 -145 VRight 2
SYMATTR Value PULSE(0 1 {{period} * .5} 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V2
SYMBOL voltage -64 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -61 -171 VRight 2
SYMATTR Value PULSE(0 1 {{period} * .5} 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V3
SYMBOL voltage 112 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -55 -229 VRight 2
SYMATTR Value PULSE(0 12 0 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V4
SYMBOL PowerProducts\\LT1764A-3.3 -1472 -896 R0
SYMATTR InstName U1
SYMBOL cap -1232 -832 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL cap -1104 -832 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL cap -1760 -832 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL cap -1888 -832 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL res -2064 -960 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 2.2k
SYMBOL cap -2064 -832 R0
SYMATTR InstName C5
SYMATTR Value 6.8n
SYMBOL cap -1760 -256 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap -1888 -256 R0
SYMATTR InstName C7
SYMATTR Value 10µ
SYMBOL cap -1232 -256 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL cap -1104 -256 R0
SYMATTR InstName C9
SYMATTR Value 2.2µ
SYMBOL voltage -2560 -624 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 {VinNoiseA} {VinNoiseF})
SYMBOL voltage -2160 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName 12VTheo
SYMATTR Value 12
SYMBOL schottky -592 -1104 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value PRLL5817
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -528 -1168 R0
SYMATTR InstName C10
SYMATTR Value 400n
SYMBOL cap 944 -176 R0
SYMATTR InstName C12
SYMATTR Value 220n
SYMBOL schottky 944 -320 R0
SYMATTR InstName D2
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 400 -128 R0
SYMATTR InstName C13
SYMATTR Value 0.6n
SYMBOL res 400 -288 R0
SYMATTR InstName R3
SYMATTR Value 300
SYMBOL cap 624 -128 R0
SYMATTR InstName C14
SYMATTR Value 0.6n
SYMBOL res 624 -288 R0
SYMATTR InstName R4
SYMATTR Value 300
SYMBOL PowerProducts\\LTC1693-1 1472 -208 R0
SYMATTR InstName U3
SYMBOL cap 928 576 R0
SYMATTR InstName C11
SYMATTR Value 220n
SYMBOL schottky 928 432 R0
SYMATTR InstName D3
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 384 624 R0
SYMATTR InstName C15
SYMATTR Value 0.6n
SYMBOL res 384 464 R0
SYMATTR InstName R2
SYMATTR Value 300
SYMBOL cap 608 624 R0
SYMATTR InstName C16
SYMATTR Value 0.6n
SYMBOL res 608 464 R0
SYMATTR InstName R5
SYMATTR Value 300
SYMBOL PowerProducts\\LTC1693-1 1456 544 R0
SYMATTR InstName U2
SYMBOL voltage -640 -256 R0
WINDOW 3 -64 -177 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 {FWD_Driver} 0 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V6
SYMBOL voltage -448 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -50 -145 VRight 2
SYMATTR Value PULSE(0 {BACK_Driver} {{period} * .5} 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V7
SYMBOL voltage -144 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -61 -171 VRight 2
SYMATTR Value PULSE(0 {BACK_Driver} {{period} * .5} 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V8
SYMBOL voltage 80 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -55 -229 VRight 2
SYMATTR Value PULSE(0 {FWD_Driver} 0 100n 100n {{period}*{duty}} {period})
SYMATTR InstName V9
SYMBOL ind 1488 -1056 R0
SYMATTR InstName Lmotor
SYMATTR Value 600n
TEXT 1232 168 Left 2 !.param period=26u duty=.6
TEXT 1232 296 Left 2 !.tran 1m
TEXT 1232 136 Left 2 !.param Vin=6V VinNoiseA=0 VinNoiseF=150k
TEXT -16 800 Left 2 ;Driver Signals (TESTING)
TEXT -1464 -744 Left 2 ;Actual: LD1086\n3V3, 1.5A, 5W
TEXT -1256 -584 Left 4 ;3V3 Linear Regulator
TEXT -1272 40 Left 4 ;12V DC-DC Converter
TEXT -2424 48 Left 4 ;Vin
TEXT -1448 -168 Left 2 ;Actual: ISE0312A\n12V, 83mA, 1W
TEXT 368 88 Left 2 ;Vcc of 3.3V to MCU gives pin output 2.5V @ 10mA\n(pin driver strength)\nRmin of 250 ohms\n \nQ = I*t and Q = CV so t = CV/I\n1% of a 30kHz period is 300ns, thus ideally t <= 150ns\nGives C = 600pF = 0.6nF
TEXT 1232 216 Left 2 !.param FWD_Driver=6V BACK_Driver=0.1V
TEXT -112 40 Left 4 ;MCU PWM Signals
TEXT 1424 784 Left 4 ;MOSFET Drivers
TEXT 1376 -600 Left 4 ;MOSFET H-Bridge
TEXT 592 896 Left 4 ;WARNING: ISSUE WITH DRIVERS\nUse ideal signals to prevent MOSFETs shorting
RECTANGLE Normal 256 832 -800 112 2
RECTANGLE Normal -848 -544 -2304 -1120 2
RECTANGLE Normal -848 80 -2304 -496 2
RECTANGLE Normal -2768 80 -2336 -1120 2
RECTANGLE Normal 256 80 -800 -496 2
RECTANGLE Normal 1728 336 1200 80 3
RECTANGLE Normal 1792 832 304 -496 2
RECTANGLE Normal 1792 -1680 -800 -544 2
