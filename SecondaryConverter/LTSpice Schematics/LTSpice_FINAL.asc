Version 4
SHEET 1 3044 2500
WIRE 624 64 480 64
WIRE 800 64 624 64
WIRE 912 64 880 64
WIRE 944 64 912 64
WIRE 1072 64 1008 64
WIRE 1152 64 1072 64
WIRE 1264 64 1152 64
WIRE 272 80 64 80
WIRE 416 80 272 80
WIRE 480 80 480 64
WIRE 624 80 624 64
WIRE 64 112 64 80
WIRE 272 128 272 80
WIRE 1072 128 1072 64
WIRE 1152 128 1152 64
WIRE 416 176 416 80
WIRE 480 176 480 144
WIRE 480 176 416 176
WIRE 912 176 912 64
WIRE 624 192 624 144
WIRE 624 192 400 192
WIRE 480 208 480 176
WIRE 624 208 624 192
WIRE -1408 256 -1408 224
WIRE 64 256 64 192
WIRE 176 256 64 256
WIRE 272 256 272 192
WIRE 272 256 176 256
WIRE 400 256 400 192
WIRE 400 256 272 256
WIRE 864 256 816 256
WIRE 176 272 176 256
WIRE 480 304 480 272
WIRE 624 304 624 272
WIRE 624 304 480 304
WIRE 912 304 912 272
WIRE 912 304 624 304
WIRE 1072 304 1072 192
WIRE 1072 304 912 304
WIRE 1152 304 1152 192
WIRE 1152 304 1072 304
WIRE 1040 688 1040 672
WIRE 976 736 944 736
WIRE 944 768 944 736
WIRE 128 784 48 784
WIRE 224 784 128 784
WIRE 1120 784 1040 784
WIRE 944 832 944 768
WIRE 976 832 944 832
WIRE 1040 896 1040 880
WIRE 48 912 48 880
WIRE -688 1280 -848 1280
WIRE -416 1280 -608 1280
WIRE -304 1280 -416 1280
WIRE -1168 1344 -1168 1312
WIRE -1136 1344 -1168 1344
WIRE -304 1392 -304 1344
WIRE -1168 1472 -1168 1344
WIRE -1040 1472 -1168 1472
WIRE -1040 1504 -1040 1472
WIRE -848 1520 -848 1280
WIRE -848 1520 -896 1520
WIRE -816 1520 -848 1520
WIRE -416 1520 -416 1280
WIRE -416 1520 -496 1520
WIRE -1040 1616 -1040 1584
WIRE -1040 1616 -1056 1616
WIRE -816 1616 -1040 1616
WIRE -864 1712 -896 1712
WIRE -816 1712 -864 1712
WIRE -480 1712 -496 1712
WIRE -656 1888 -656 1856
FLAG -64 976 0
FLAG 176 272 0
FLAG -1408 336 0
FLAG -1408 144 TotemOutIdeal
FLAG 1264 64 Vout
FLAG 48 912 0
FLAG -1008 256 VoutIdeal
FLAG -1008 336 0
FLAG -592 336 0
FLAG -592 256 3v3Source
FLAG 128 704 Vout
FLAG 224 784 PWMIncreasedOut
FLAG 1200 784 TotemOut
FLAG 1120 672 Vout
FLAG 944 768 PWMIncreasedOut
FLAG 624 64 RectOut
FLAG 1040 896 0
FLAG -864 1776 0
FLAG -64 896 PWMOut
FLAG -16 832 PWMOut
FLAG -976 1712 PWMOut
FLAG -304 1392 0
FLAG -976 1520 0
FLAG -1136 1616 0
FLAG -1072 1344 0
FLAG -1168 1232 Vout
FLAG -656 1472 DriverIn
FLAG -1168 1472 DriverIn
FLAG -896 1808 0
FLAG -656 1888 0
FLAG -480 1712 0
FLAG -416 1616 FetDriverOut
FLAG 816 256 FetDriverOut
SYMBOL voltage 64 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 8 150k 0 0 0 100)
SYMBOL cap 256 128 R0
SYMATTR InstName C1
SYMATTR Value 300p
SYMBOL diode 496 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 640 144 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL diode 496 272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode 640 272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL ind 784 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL voltage -64 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0 0 0 10u 20u 10)
SYMBOL npn 976 688 R0
SYMATTR InstName Q1
SYMBOL npn -16 784 R0
SYMATTR InstName Q3
SYMBOL diode 944 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL cap 1056 128 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res 1216 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage -1408 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 20 0 0 0 1u 20u 10)
SYMBOL res -1424 128 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 1136 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL voltage -1008 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(3 15 0 0 0 20u 20u 10)
SYMBOL voltage -592 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3.3
SYMBOL nmos 864 176 R0
SYMATTR InstName M1
SYMATTR Value FQP33N10
SYMATTR Prefix X
SYMBOL cap 1136 128 R0
SYMATTR InstName C3
SYMATTR Value 10p
SYMBOL res 112 688 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL pnp 976 880 M180
SYMATTR InstName Q4
SYMBOL PowerProducts\\LTC4441 -656 1664 R0
SYMATTR InstName U1
SYMBOL res -880 1696 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL cap -880 1712 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL res -880 1504 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 84.5k
SYMBOL res -592 1264 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 330k
SYMBOL cap -320 1280 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res -1040 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 12.4k
SYMBOL res -1184 1216 R0
SYMATTR InstName R9
SYMATTR Value 2.2
SYMBOL cap -1072 1328 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMBOL res -1056 1488 R0
SYMATTR InstName R10
SYMATTR Value 49.9k
SYMBOL res -800 1792 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res -400 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2.2
TEXT 32 328 Left 2 !.tran 1m
TEXT -1216 704 Left 2 !.lib OptiMOS5_80V_LTSpice.lib
TEXT 1576 280 Left 2 ;3v3Source drives totem pole etc w/ mosfet fine, will this be okay or is it just simulation inaccuracy?
TEXT 1576 328 Left 2 ;VoutIdeal also drives totem pole etc w/ mosfet fine, but actual Vout causes simulation not to run (or take a very long time)
TEXT -1216 752 Left 2 !.lib FQP33N10.lib
TEXT 1576 416 Left 2 ;Voltage drops a lot when switch is on, capacitance not high enough?
TEXT 1576 464 Left 2 ;Tried changing capacitor values - no change
TEXT 1576 512 Left 2 ;Increased pwm frequency - less drop but higher voltage. If duty cycle is changed then the same drops still exist
TEXT 792 568 Left 2 ;Totem Pole - Boost Mosfet Gate Current
TEXT 16 544 Left 2 ;Fet Gate Voltage Booster
TEXT -1072 0 Left 2 ;Ideal Sources
TEXT 2152 128 Left 2 ;Notes
TEXT -1080 584 Left 2 ;Additional Libraries
TEXT 520 -8 Left 2 ;Main Circuitry
TEXT 1584 592 Left 2 ;Ltspice crashes when Fet gate is connected to npn or totem
TEXT 1584 672 Left 2 ;Timestep error (too small) with mosfet?
TEXT -800 1144 Left 2 ;Mosfet Driver
RECTANGLE Normal -432 416 -1536 -32 2
RECTANGLE Normal 3040 800 1504 96 2
RECTANGLE Normal -656 912 -1248 560 2
RECTANGLE Normal 1392 432 -112 -32 2
RECTANGLE Normal 480 1024 -208 512 2
RECTANGLE Normal 1360 944 752 528 2
RECTANGLE Normal -176 1968 -1296 1120 2
